/*C12*/SET SCHEMA PUBLIC
alter table image drop constraint FKgpextbyee3uk9u6o2381m7ft1
alter table product drop constraint FKghawd5rtv8ok565nwpdyyuto9
alter table user drop constraint FK2yuxsfrkkrnkn5emoobcnnc3r
drop table company if exists
drop table image if exists
drop table product if exists
drop table user if exists
create table company (id bigint generated by default as identity (start with 1), address varchar(255), category varchar(255), company_name varchar(255), postal_code varchar(255), primary key (id))
create table image (id bigint generated by default as identity (start with 1), date_created timestamp, descript varchar(255), file_name varchar(255), folder varchar(255), img_name varchar(255), product_id bigint, primary key (id))
create table product (id bigint generated by default as identity (start with 1), price double not null, prod_attrs varbinary(255), prod_category varchar(255), prod_id varchar(255), prod_name varchar(255), stock integer not null, company_id bigint, primary key (id))
create table user (id bigint generated by default as identity (start with 1), confirmed boolean not null, email varchar(255) not null, full_name varchar(255), password varchar(255), user_name varchar(255) not null, company_id bigint, primary key (id))
alter table company add constraint UKh7w1mkrsh1wcg5dkv6wrvam5m unique (company_name)
alter table user add constraint UKf9dvvibvpfsldnu8wh3enop4i unique (user_name, email)
alter table image add constraint FKgpextbyee3uk9u6o2381m7ft1 foreign key (product_id) references product
alter table product add constraint FKghawd5rtv8ok565nwpdyyuto9 foreign key (company_id) references company
alter table user add constraint FK2yuxsfrkkrnkn5emoobcnnc3r foreign key (company_id) references company
INSERT INTO COMPANY VALUES(1,'NTU','Books','BookStore','637720')
INSERT INTO COMPANY VALUES(2,'NTU','Foods','FootHunt','637720')
COMMIT
INSERT INTO USER VALUES(1,TRUE,'nxphi47@gmail.com','Nguyen Xuan Phi','123123123','nxphi47',1)
INSERT INTO USER VALUES(2,TRUE,'xuanphi001@e.ntu.edu.sg','fi fi','123123123','xuanphi001',1)
INSERT INTO USER VALUES(3,TRUE,'david@gmail.com','John david','123456','david',NULL)
INSERT INTO USER VALUES(4,TRUE,'lara@gmail.com','lara croft','123456','lara',NULL)
COMMIT
INSERT INTO PRODUCT VALUES(1,12.2E0,'aced0005737200116a6176612e7574696c2e486173684d61700507dac1c31660d103000246000a6c6f6164466163746f724900097468726573686f6c6478703f400000000000007708000000100000000078','science','prod_1','Quantum Physics',20,1)
INSERT INTO PRODUCT VALUES(2,30.2E0,'aced0005737200116a6176612e7574696c2e486173684d61700507dac1c31660d103000246000a6c6f6164466163746f724900097468726573686f6c6478703f400000000000007708000000100000000078','science','prod_2','Computer science',22,1)
COMMIT
